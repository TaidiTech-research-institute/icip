<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ICIP1.html">ICIP1</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.User">User</a></li></li><li><li><a href="#type.TokenId">TokenId</a></li></li><li><li><a href="#type.Balance">Balance</a></li></li><li><li><a href="#type.Metadata">Metadata</a></li></li><li><li><a href="#type.MetadataResponse">MetadataResponse</a></li></li><li><li><a href="#type.BalanceRequest">BalanceRequest</a></li></li><li><li><a href="#type.BalanceResponse">BalanceResponse</a></li></li><li><li><a href="#type.TransferRequest">TransferRequest</a></li></li><li><li><a href="#type.TransferResponse">TransferResponse</a></li></li><li><li><a href="#type.OperatorAction">OperatorAction</a></li></li><li><li><a href="#type.OperatorRequest">OperatorRequest</a></li></li><li><li><a href="#type.OperatorResponse">OperatorResponse</a></li></li><li><li><a href="#type.IsAuthorizedRequest">IsAuthorizedRequest</a></li></li><li><li><a href="#type.IsAuthorizedResponse">IsAuthorizedResponse</a></li></li><li><li><a href="#type.IUser">IUser</a></li></li><li><li><a href="#type.ITokenId">ITokenId</a></li></li><li><li><a href="#type.TokenIdentifier">TokenIdentifier</a></li></li><li><li><a href="#type.ITokenIdentifier">ITokenIdentifier</a></li></li><li><li><a href="#type.Token">Token</a></li></li></ul></nav><div class="documentation"><h1>ICIP1</h1><p>Module translated from <a href="https://github.com/sailfish-app/proposals/blob/master/icip-1.md">ICIP-1</a> code.
Added some refined classes and functions.</p>
<p>The ICIP-1 token interface
Include this library in your code to impliment a token in a canister.</p>
<p>Pseudo code:</p>
<pre class="motoko"><code class="motoko">import ICIP1 &quot;mo:icip/ICIP-1&quot;;

actor token {
  public query func getBalance(requests: [ICIP1.BalanceRequest]): async ICIP1.BalanceResponse {
    let balance: Nat = 0: Nat;
    #ok([balance]);
  };
  public query func getMetadata(tokenIds: [ICIP1.TokenId]): async ICIP1.MetadataResponse {
    let metadata: ICIP1.Metadata = &quot;icip-token&quot;;
    #ok([metadata]);
  };
  public shared func transfer(requests: [ICIP1.TransferRequest]): async ICIP1.TransferResponse {
    #ok();
  };
  public shared func updateOperator(requests: [ICIP1.OperatorRequest]): async ICIP1.OperatorResponse {
    #ok();
  };
  public query func isAuthorized(requests: [ICIP1.IsAuthorizedRequest]): async ICIP1.IsAuthorizedResponse {
    [true]
  };
};</code></pre><p>Go to ICIPTest.mo to find how to implement this package to your code.</p>
<div class="declaration"><h4 class="type-declaration" id="type.User"><span class="keyword">type </span><span class="type">User</span> = <span class="type">Principal</span></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TokenId"><span class="keyword">type </span><span class="type">TokenId</span> = <span class="type">Nat32</span></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Balance"><span class="keyword">type </span><span class="type">Balance</span> = <span class="type">Nat</span></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Metadata"><span class="keyword">type </span><span class="type">Metadata</span> = <span class="type">Text</span></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.MetadataResponse"><span class="keyword">type </span><span class="type">MetadataResponse</span> = <span class="type">Result.Result</span>&lt;[<a href="#type.Metadata"><span class="type">Metadata</span></a>], {#InvalidToken : <a href="#type.TokenId"><span class="type">TokenId</span></a>}&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.BalanceRequest"><span class="keyword">type </span><span class="type">BalanceRequest</span> = { user : <a href="#type.User"><span class="type">User</span></a>; tokenId : <a href="#type.TokenId"><span class="type">TokenId</span></a> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.BalanceResponse"><span class="keyword">type </span><span class="type">BalanceResponse</span> = <span class="type">Result.Result</span>&lt;[<a href="#type.Balance"><span class="type">Balance</span></a>], {#InvalidToken : <a href="#type.TokenId"><span class="type">TokenId</span></a>}&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TransferRequest"><span class="keyword">type </span><span class="type">TransferRequest</span> = { from : <a href="#type.User"><span class="type">User</span></a>; to : <a href="#type.User"><span class="type">User</span></a>; tokenId : <a href="#type.TokenId"><span class="type">TokenId</span></a>; amount : <a href="#type.Balance"><span class="type">Balance</span></a> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TransferResponse"><span class="keyword">type </span><span class="type">TransferResponse</span> = <span class="type">Result.Result</span>&lt;(), {#Unauthorized; #InvalidDestination : <a href="#type.User"><span class="type">User</span></a>; #InvalidToken : <a href="#type.TokenId"><span class="type">TokenId</span></a>; #InsufficientBalance}&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.OperatorAction"><span class="keyword">type </span><span class="type">OperatorAction</span> = {#AddOperator; #RemoveOperator}</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.OperatorRequest"><span class="keyword">type </span><span class="type">OperatorRequest</span> = { owner : <a href="#type.User"><span class="type">User</span></a>; operators : [(<a href="#type.User"><span class="type">User</span></a>, <a href="#type.OperatorAction"><span class="type">OperatorAction</span></a>)] }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.OperatorResponse"><span class="keyword">type </span><span class="type">OperatorResponse</span> = <span class="type">Result.Result</span>&lt;(), {#Unauthorized; #InvalidOwner : <a href="#type.User"><span class="type">User</span></a>}&gt;</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.IsAuthorizedRequest"><span class="keyword">type </span><span class="type">IsAuthorizedRequest</span> = { owner : <a href="#type.User"><span class="type">User</span></a>; operator : <a href="#type.User"><span class="type">User</span></a> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.IsAuthorizedResponse"><span class="keyword">type </span><span class="type">IsAuthorizedResponse</span> = [<span class="type">Bool</span>]</h4><p></p></div><div class="declaration"><h4 class="class-declaration" id="type.IUser"><span class="keyword">class </span><span class="classname">IUser</span>()</h4><div class="declaration"><h4 class="value-declaration" id="IUser.equal"><code><span class="keyword">public let </span><span class="fnname">equal</span> : </code></h4><p></p></div><div class="declaration"><h4 class="value-declaration" id="IUser.hash"><code><span class="keyword">public let </span><span class="fnname">hash</span> : </code></h4><p></p></div><p><p>utilities</p>
</p></div><div class="declaration"><h4 class="class-declaration" id="type.ITokenId"><span class="keyword">class </span><span class="classname">ITokenId</span>(<span class="parameter">id</span> : <a href="#type.TokenId"><span class="type">TokenId</span></a>, <span class="parameter">id2</span> : <a href="#type.TokenId"><span class="type">TokenId</span></a>)</h4><div class="declaration"><h4 class="function" id="ITokenId.equal"><code><span class="keyword">public func </span><span class="fnname">equal</span>() : <span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="ITokenId.hash"><code><span class="keyword">public func </span><span class="fnname">hash</span>() : <span class="type">Hash.Hash</span></code></h4><p></p></div><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TokenIdentifier"><span class="keyword">type </span><span class="type">TokenIdentifier</span> = { canister : <a href="#type.Token"><span class="type">Token</span></a>; tokenId : <a href="#type.TokenId"><span class="type">TokenId</span></a> }</h4><p></p></div><div class="declaration"><h4 class="class-declaration" id="type.ITokenIdentifier"><span class="keyword">class </span><span class="classname">ITokenIdentifier</span>(<span class="parameter">ti</span> : <a href="#type.TokenIdentifier"><span class="type">TokenIdentifier</span></a>, <span class="parameter">ti2</span> : <a href="#type.TokenIdentifier"><span class="type">TokenIdentifier</span></a>)</h4><div class="declaration"><h4 class="function" id="ITokenIdentifier.equal"><code><span class="keyword">public func </span><span class="fnname">equal</span>() : <span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="ITokenIdentifier.hash"><code><span class="keyword">public func </span><span class="fnname">hash</span>() : <span class="type">Hash.Hash</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="ITokenIdentifier.toText"><code><span class="keyword">public func </span><span class="fnname">toText</span>() : <span class="type">Text</span></code></h4><p></p></div><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Token"><span class="keyword">type </span><span class="type">Token</span> = <span class="keyword">actor </span>{ getBalance : <span class="keyword">shared query </span>(<span class="parameter">requests</span> : [<a href="#type.BalanceRequest"><span class="type">BalanceRequest</span></a>]) -&gt; <span class="keyword">async </span><a href="#type.BalanceResponse"><span class="type">BalanceResponse</span></a>; getMetadata : <span class="keyword">shared query </span>(<span class="parameter">tokenIds</span> : [<a href="#type.TokenId"><span class="type">TokenId</span></a>]) -&gt; <span class="keyword">async </span><a href="#type.MetadataResponse"><span class="type">MetadataResponse</span></a>; transfer : <span class="keyword">shared </span>(<span class="parameter">requests</span> : [<a href="#type.TransferRequest"><span class="type">TransferRequest</span></a>]) -&gt; <span class="keyword">async </span><a href="#type.TransferResponse"><span class="type">TransferResponse</span></a>; updateOperator : <span class="keyword">shared </span>(<span class="parameter">requests</span> : [<a href="#type.OperatorRequest"><span class="type">OperatorRequest</span></a>]) -&gt; <span class="keyword">async </span><a href="#type.OperatorResponse"><span class="type">OperatorResponse</span></a>; isAuthorized : <span class="keyword">shared query </span>(<span class="parameter">requests</span> : [<a href="#type.IsAuthorizedRequest"><span class="type">IsAuthorizedRequest</span></a>]) -&gt; <span class="keyword">async </span><a href="#type.IsAuthorizedResponse"><span class="type">IsAuthorizedResponse</span></a> }</h4><p><p>A token canister that can hold many tokens.</p>
</p></div></div></body></html>